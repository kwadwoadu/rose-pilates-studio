---
import { getLangFromUrl, useTranslations, useTranslatedPath } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);
const currentYear = new Date().getFullYear();
---

<footer style="background-color: var(--color-bg-warm); color: var(--color-text-body);">
  <div class="max-w-7xl mx-auto px-6 py-16">
    <div class="grid md:grid-cols-3 gap-12 md:gap-8">
      <!-- Brand Column -->
      <div class="text-center md:text-left">
        <h4 class="font-serif text-xl mb-4" style="color: var(--color-text);">Rose Pilates Studio</h4>
        <p class="text-sm leading-relaxed mb-6" style="color: var(--color-text-muted);">
          {t('footer.tagline')}
        </p>
        <img
          src="/images/fpmp-badge-2026.png"
          alt="FPMP Professional Badge 2026"
          class="h-16 w-auto mx-auto md:mx-0"
          loading="lazy"
        />
      </div>

      <!-- Quick Links -->
      <div class="text-center md:text-left">
        <h4 class="text-sm font-medium tracking-wide mb-6" style="color: var(--color-text);">{t('footer.links')}</h4>
        <nav class="space-y-3">
          <a href={translatePath('/#about')} class="block text-sm py-1 link-underline" style="color: var(--color-text-muted);">{t('nav.about')}</a>
          <a href={translatePath('/#classes')} class="block text-sm py-1 link-underline" style="color: var(--color-text-muted);">{t('nav.classes')}</a>
          <a href={translatePath('/#faq')} class="block text-sm py-1 link-underline" style="color: var(--color-text-muted);">{t('nav.faq')}</a>
          <a href={translatePath('/booking')} class="block text-sm py-1 link-underline" style="color: var(--color-text-muted);">{t('nav.book')}</a>
        </nav>
      </div>

      <!-- Contact + Legal -->
      <div class="text-center md:text-left">
        <h4 class="text-sm font-medium tracking-wide mb-6" style="color: var(--color-text);">{t('footer.contact')}</h4>
        <div class="space-y-3 mb-8">
          <a href="mailto:rorosey@icloud.com" class="block text-sm py-1 link-underline" style="color: var(--color-text-muted);">
            rorosey@icloud.com
          </a>
          <a href="tel:+33768266957" class="block text-sm py-1 link-underline" style="color: var(--color-text-muted);">
            07 68 26 69 57
          </a>
          <p class="text-sm" style="color: var(--color-text-muted);">
            236 Rue Camille Godard, 33000 Bordeaux
          </p>
        </div>

        <h4 class="text-sm font-medium tracking-wide mb-4" style="color: var(--color-text);">{t('footer.legal')}</h4>
        <nav class="space-y-2">
          <a href={translatePath('/mentions-legales')} class="block text-sm py-1 link-underline" style="color: var(--color-text-muted);">{t('footer.mentions')}</a>
          <a href={translatePath('/cgv')} class="block text-sm py-1 link-underline" style="color: var(--color-text-muted);">{t('footer.cgv')}</a>
          <a href={translatePath('/waiver')} class="block text-sm py-1 link-underline" style="color: var(--color-text-muted);">{t('footer.waiver')}</a>
        </nav>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="mt-12 pt-8 text-center" style="border-top: 1px solid var(--color-border-light);">
      <p class="text-sm" style="color: var(--color-text-muted);">
        &copy; {currentYear} {t('footer.copyright')}
      </p>
    </div>
  </div>
</footer>
