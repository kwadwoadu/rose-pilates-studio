---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const faqs = [
  { q: t('faq.q1'), a: t('faq.a1') },
  { q: t('faq.q2'), a: t('faq.a2') },
  { q: t('faq.q3'), a: t('faq.a3') },
  { q: t('faq.q4'), a: t('faq.a4') },
  { q: t('faq.q5'), a: t('faq.a5') },
  { q: t('faq.q6'), a: t('faq.a6') },
  { q: t('faq.q7'), a: t('faq.a7') },
  { q: t('faq.q8'), a: t('faq.a8') },
  { q: t('faq.q9'), a: t('faq.a9') },
  { q: t('faq.q10'), a: t('faq.a10') },
  { q: t('faq.q11'), a: t('faq.a11') },
  { q: t('faq.q12'), a: t('faq.a12') },
];
---

<section id="faq" class="section-padding">
  <div class="max-w-[720px] mx-auto">
    <!-- Heading only -->
    <div class="mb-16 scroll-animate">
      <h2>{t('faq.heading')}</h2>
    </div>

    <!-- FAQ Accordion -->
    <div class="scroll-animate">
      {faqs.map((faq) => (
        <details class="faq-item group" style="border-top: 1px solid var(--color-border-light);">
          <summary class="flex items-center justify-between gap-4 py-8 cursor-pointer list-none">
            <span class="font-serif text-lg" style="color: var(--color-text);">{faq.q}</span>
            <span class="faq-icon flex-shrink-0 text-xl transition-transform duration-300 group-open:rotate-45" style="color: var(--color-accent-rose);">+</span>
          </summary>
          <div class="pb-8">
            <p class="leading-relaxed" style="color: var(--color-text-muted);">{faq.a}</p>
          </div>
        </details>
      ))}
      <!-- Bottom border for last item -->
      <div style="border-top: 1px solid var(--color-border-light);"></div>
    </div>

    <!-- Ask a Question CTA -->
    <div class="mt-16 scroll-animate">
      <a href="mailto:rorosey@icloud.com" class="btn-outline">
        {t('faq.askCta')}
      </a>
    </div>
  </div>
</section>

<style>
  details summary::-webkit-details-marker {
    display: none;
  }
  details summary::marker {
    display: none;
    content: '';
  }
</style>
