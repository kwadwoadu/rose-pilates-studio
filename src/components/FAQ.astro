---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const faqs = [
  { q: t('faq.q1'), a: t('faq.a1') },
  { q: t('faq.q2'), a: t('faq.a2') },
  { q: t('faq.q3'), a: t('faq.a3') },
  { q: t('faq.q4'), a: t('faq.a4') },
  { q: t('faq.q5'), a: t('faq.a5') },
  { q: t('faq.q6'), a: t('faq.a6') },
  { q: t('faq.q7'), a: t('faq.a7') },
  { q: t('faq.q8'), a: t('faq.a8') },
  { q: t('faq.q9'), a: t('faq.a9') },
  { q: t('faq.q10'), a: t('faq.a10') },
  { q: t('faq.q11'), a: t('faq.a11') },
  { q: t('faq.q12'), a: t('faq.a12') },
];
---

<section id="faq" class="section-padding" style="background-color: var(--color-bg-warm);">
  <div class="max-w-3xl mx-auto">
    <!-- Section Header -->
    <div class="text-center mb-12 scroll-animate">
      <div class="flex items-center justify-center gap-4 mb-6">
        <div class="w-16 h-px" style="background-color: var(--color-accent-rose); opacity: 0.3;"></div>
        <span class="text-sm tracking-widest uppercase" style="color: var(--color-accent-rose);">{t('faq.label')}</span>
        <div class="w-16 h-px" style="background-color: var(--color-accent-rose); opacity: 0.3;"></div>
      </div>
      <h2 class="text-3xl md:text-4xl">{t('faq.heading')}</h2>
    </div>

    <!-- FAQ Accordion (zero JS - native details/summary) -->
    <div class="space-y-3 scroll-animate">
      {faqs.map((faq) => (
        <details class="faq-item group bg-white border rounded-sm" style="border-color: var(--color-border-light);">
          <summary class="flex items-center justify-between gap-4 px-6 py-5 cursor-pointer list-none font-medium" style="color: var(--color-text);">
            <span>{faq.q}</span>
            <svg class="w-5 h-5 flex-shrink-0 transition-transform duration-300 group-open:rotate-180" style="color: var(--color-accent-rose);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-6 pb-5">
            <p class="leading-relaxed" style="color: var(--color-text-muted);">{faq.a}</p>
          </div>
        </details>
      ))}
    </div>

    <!-- Ask a Question CTA -->
    <div class="text-center mt-12 scroll-animate">
      <a href="mailto:rorosey@icloud.com" class="btn-outline">
        {t('faq.askCta')}
      </a>
    </div>
  </div>
</section>

<style>
  /* Remove default marker */
  details summary::-webkit-details-marker {
    display: none;
  }
  details summary::marker {
    display: none;
    content: '';
  }
</style>
